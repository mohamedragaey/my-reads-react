(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(41)},28:function(e,t,a){},30:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),i=a.n(r),c=a(44),s=(a(28),a(3)),l=a(4),u=a(6),h=a(5),m=a(7),f=a(45),d=a(16),k="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:p},g=function(){return fetch("".concat(k,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books})},b=(a(29),a(30),a(9)),y=a.n(b);function E(){y.a.notification({message:'<span data-uk-icon="warning"></span> Connection Error',status:"danger",timeout:1e3})}var w=a(43),N=(a(33),a(34),a(22)),S=a(11),j=a(12);var O=function(e){var t=e.rating,a=Math.floor(t),n=t%1,r=Object(N.a)(Array(5));return e.rating?o.a.createElement("div",null,r.map(function(e,t){return t+1<=a?o.a.createElement(S.a,{key:t,className:"normal",icon:j.a}):t+1===a+1&&0!==n?o.a.createElement(S.a,{key:t,className:"normal",icon:j.b}):o.a.createElement(S.a,{key:t,className:"empty",icon:j.a})})):o.a.createElement("div",null,o.a.createElement(S.a,{className:"empty",icon:j.a}))};function C(e){var t=e.title,a=e.authors;return o.a.createElement("div",{className:" uk-margin-medium-top"},o.a.createElement("div",{className:"uk-text-small uk-margin-small-bottom"},t),a.map(function(e){return o.a.createElement("div",{key:e,className:"uk-text-meta"},e)}))}C.defaultProps={title:"none",authors:["unkown"]};var R=C;function x(e){var t=e.imageLinks,a=e.book,n=a.id,r=a.printType,i=a.pageCount,c=a.publishedDate,s=a.publisher,l=a.categories;return o.a.createElement("div",null,o.a.createElement("img",{className:"book-cover",style:{width:128,height:193},src:t.thumbnail,alt:"Not Available"}),o.a.createElement("div",{id:"overlay".concat(n),className:"overlay uk-overlay uk-overlay-primary uk-position-cover uk-text-meta",hidden:!0},o.a.createElement("div",{className:"uk-card uk-position-cover"},o.a.createElement("div",{className:"uk-card-header uk-padding-remove uk-margin-medium-top"},o.a.createElement("p",null,o.a.createElement("small",null,"Pages: ",i)),o.a.createElement("div",{className:"uk-card-badge uk-label uk-position-top-right"},r)),o.a.createElement("div",{className:"uk-card-body uk-padding-remove"},c?o.a.createElement("p",null,o.a.createElement("small",null,"Published: ",c)):"",s?o.a.createElement("p",null,o.a.createElement("small",null,"Publisher: ",s)):""),l?o.a.createElement("div",{className:"uk-card-footer uk-padding-remove uk-position-bottom"},o.a.createElement("p",{className:"uk-text-center"},"Categories:"),o.a.createElement("p",null,l?l.map(function(e){return o.a.createElement("small",{key:e},e.toLowerCase())}):"")):""),o.a.createElement("div",{className:"uk-position-cover uk-margin-small-left uk-margin-small-top"})))}x.defaultProps={imageLinks:{thumbnail:"http://i.imgur.com/J5LVHEL.jpg"}};var P=x;function q(e){return o.a.createElement("button",{className:"info uk-position-absolute uk-icon-link",type:"link","data-uk-toggle":"target: #overlay".concat(e.id,"; animation: uk-animation-slide-top-small"),"data-uk-icon":"info"})}q.defaultProps={id:String(Math.random()*Math.floor(100))};var A=q;function L(e){var t=e.shelf,a=e.changed;return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:t,onChange:function(e){return a(e.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))}L.defaultProps={shelf:"none"};var T=L,M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this))).state={shelf:e.book.shelf},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(t.shelf!==this.state.shelf){var a=this.props.book,n=this.state.shelf;this.props.changeShelf(a,n)}}},{key:"render",value:function(){var e=this,t=this.props.book,a=t.id,n=t.title,r=t.authors,i=t.imageLinks,c=t.averageRating;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top uk-flex-column"},o.a.createElement(O,{rating:c}),o.a.createElement(A,{id:a}),o.a.createElement(P,{imageLinks:i,book:t}),o.a.createElement(T,{shelf:this.state.shelf,changed:function(t){return e.setState({shelf:t})}})),o.a.createElement(R,{title:n,authors:r})))}}]),t}(n.Component);function W(e){var t=e.books,a=e.changeShelf;return o.a.createElement("ol",{className:"uk-flex uk-flex-center","data-uk-grid":!0},t.map(function(e){return o.a.createElement(M,{key:e.id,book:e,changeShelf:a})}))}M.defaultProps={book:{},changeShelf:function(){}},W.defaultProps={books:[],changeShelf:function(){}};var B=W;a(37);function D(e){var t=e.shelf,a=t.title,n=t.books;return o.a.createElement("div",{className:"uk-container uk-margin-small"},o.a.createElement("h2",{className:"bookshelf-title"},a),o.a.createElement(B,{books:n,changeShelf:e.changeShelf}))}D.defaultProps={shelf:{title:"empty",books:[]},changeShelf:function(){}};var Q=D;function J(e){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"My Reads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,e.shelves.map(function(t){return o.a.createElement(Q,{key:t.title,shelf:t,changeShelf:e.changeShelf})}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(w.a,{to:"/search"},"Add a book")))}J.defaultProps={shelves:[{title:"Currently Reading",books:[]},{title:"Want to Read",books:[]},{title:"Read",books:[]}],changeShelf:function(){}};var U=J,I=(a(38),a(39),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={query:"",typing:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a,n=this;t.query!==this.state.query&&""!==this.state.query&&(this.setState({typing:!0}),(a=this.state.query,fetch("".concat(k,"/search"),{method:"POST",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:a})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){return n.props.newQuery(e)}).catch(E)),t.query!==this.state.query&&""===this.state.query&&(this.setState({typing:!1}),this.props.newQuery(null))}},{key:"clearInput",value:function(e){e.preventDefault(),this.setState({query:""})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"uk-box-shadow-xlarge uk-flex uk-background-default","data-uk-sticky":"bottom: true; animation: uk-animation-slide-left-top"},o.a.createElement(w.a,{className:"uk-icon-link",to:"/","data-uk-icon":"icon: arrow-left; ratio: 3"}),o.a.createElement("form",{className:"search-books-bar uk-search uk-width-1-1 uk-flex-inline uk-flex-middle"},o.a.createElement("span",{className:"uk-margin-small-right uk-animation-scale-up uk-animation-fast",hidden:this.state.typing,"data-uk-icon":"icon: search; ratio: 1.25"}),o.a.createElement("input",{value:this.state.query,className:"uk-search-input",type:"search",placeholder:"Search by title or author",onChange:function(t){return e.setState({query:t.target.value})}}),o.a.createElement("button",{className:"uk-position-center-right uk-margin-small-right","data-uk-icon":"icon: close; ratio: 1.25",hidden:!this.state.typing,onClick:function(t){return e.clearInput(t)}})))}}]),t}(n.Component)),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={books:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"syncBooks",value:function(e){var t=this;return e.map(function(e){var a=t.props.books.find(function(t){return t.id===e.id});return a&&(e.shelf=a.shelf),e})}},{key:"newQuery",value:function(e){if(e&&Array.isArray(e)){var t=this.syncBooks(e);this.setState({books:t})}else this.setState({books:[]})}},{key:"render",value:function(){var e=this,t=this.state.books;return o.a.createElement("div",null,o.a.createElement(I,{newQuery:function(t){return e.newQuery(t)}}),o.a.createElement("div",{className:"uk-container uk-margin-large-top"},o.a.createElement(B,{books:t,changeShelf:this.props.changeShelf})),o.a.createElement("a",{className:"to-top uk-icon-link uk-animation-slide-bottom",href:"#top","data-uk-icon":"icon: chevron-up; ratio: 2.5",hidden:t.length<1,"data-uk-scroll":"duration: 250"}))}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;g().then(function(t){return e.setState({books:t})}).catch(E)}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.books.length!==this.state.books.length&&g().then(function(e){return a.setState({books:e})}).catch(E)}},{key:"changeShelf",value:function(e,t){var a,n;(a=e,n=t,fetch("".concat(k,"/books/").concat(a.id),{method:"PUT",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:n})}).then(function(e){return e.json()})).catch(E),this.setState(function(a){var n=[];return a.books.includes(e)?(n=a.books.map(function(a){return a===e?(a.shelf=t,a):a}),function(e){"none"!==e?y.a.notification({message:'Moved to "'.concat(e,'"'),status:"primary",timeout:1e3}):y.a.notification({message:"Removed from library",status:"warning",timeout:1e3})}(t)):(e.shelf=t,n.concat(a.books).push(e),function(e){y.a.notification({message:'<span data-uk-icon="check"></span> Added to "'.concat(e,'"'),status:"success",timeout:1e3})}(t)),{books:n}})}},{key:"putBooksOnShelf",value:function(e){return[{title:"Currently Reading",books:e.filter(function(e){return"currentlyReading"===e.shelf})},{title:"Want to Read",books:e.filter(function(e){return"wantToRead"===e.shelf})},{title:"Read",books:e.filter(function(e){return"read"===e.shelf})}]}},{key:"render",value:function(){var e=this,t=this.putBooksOnShelf(this.state.books);return o.a.createElement("div",{className:"app"},o.a.createElement(f.a,{exact:!0,path:"/",render:function(){return o.a.createElement(U,{shelves:t,changeShelf:function(t,a){return e.changeShelf(t,a)}})}}),o.a.createElement(f.a,{path:"/search",render:function(){return o.a.createElement(V,{books:e.state.books,changeShelf:function(t,a){return e.changeShelf(t,a)}})}}))}}]),t}(n.Component),H=a(21),$=a.n(H),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}y.a.use($.a),i.a.render(o.a.createElement(c.a,null,o.a.createElement(z,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/my-reads-react",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/my-reads-react","/service-worker.js");F?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):G(e)})}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.fbff0a14.chunk.js.map